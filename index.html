<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Context-Conditioned Composing Contest</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="container">
        <header>
            <div class="hero-section">
                <h1>🚀 azooKey on macOS</h1>
                <p class="hero-subtitle">AI搭載・文脈理解型の次世代日本語IME</p>
                <div class="hero-buttons">
                    <button class="hero-btn primary" onclick="startTypingDemo()">🎮 タイピングゲーム体験</button>
                    <button class="hero-btn secondary" onclick="showConversionDemo()">🤖 いい感じ変換デモ</button>
                    <a href="https://zenn.dev/azookey/articles/ea15bacf81521e" target="_blank" class="hero-btn download">📦 ダウンロード</a>
                </div>
            </div>
        </header>

        <div class="start-screen" id="startScreen">
            <div class="start-content">
                <h2>🎮 azooKey変換精度を体験</h2>
                <div class="game-intro">
                    <p>AIが文脈を理解し、同音異義語も完璧に判別。スペース不要のライブ変換を体験してください。</p>
                    
                    <div class="conversion-examples">
                        <div class="example">猫を「かう」→<strong>飼う</strong> / リンゴを「かう」→<strong>買う</strong></div>
                        <div class="example">雑誌に「のります」→<strong>載ります</strong> / 電車に「のります」→<strong>乗ります</strong></div>
                    </div>
                    
                    <div class="game-rules">
                        <h4>📝 ルール</h4>
                        <ul>
                            <li>画面の文章をひらがなで入力</li>
                            <li>スペース不要、一気に入力してEnter</li>
                            <li>10問クリアでタイム計測</li>
                        </ul>
                    </div>
                </div>
                <button id="startBtn" class="start-btn">ゲームスタート</button>
                <div class="ranking-preview" id="rankingPreview"></div>
            </div>
        </div>

        <!-- UI説明画面 -->
        <div class="ui-instructions" id="uiInstructions" style="display: none;">
            <div class="ui-instructions-content">
                <h2>🎮 遊び方</h2>
                
                <!-- ゲーム画面のスクリーンショット -->
                <div class="game-screenshot">
                    <img id="gameScreenshot" src="screenshot.png" alt="ゲーム画面">
                </div>
                
                <div class="simple-instructions">
                    <div class="simple-rule">
                        <span class="rule-emoji">🍣</span>
                        <span class="rule-text">寿司が流れきる前に入力</span>
                    </div>
                    <div class="simple-rule">
                        <span class="rule-emoji">⌨️</span>
                        <span class="rule-text">画面中央の文章を入力してEnter</span>
                    </div>
                </div>
                
                <button id="startCountdownBtn" class="countdown-start-btn">スタート！</button>
            </div>
        </div>

        <!-- カウントダウン画面 -->
        <div class="countdown-screen" id="countdownScreen" style="display: none;">
            <div class="countdown-content">
                <h2>🚀 ゲーム開始まで</h2>
                <div class="countdown-number" id="countdownNumber">3</div>
                <p class="countdown-text">準備はいいですか？</p>
            </div>
        </div>

        <div class="game-area" style="display: none;">
            <div class="sushi-header">
                <div class="time-counter">
                    <span class="time-label">経過時間</span>
                    <span class="time-value" id="gameTimer">0.0</span>
                    <span class="time-unit">秒</span>
                </div>
                <div class="status-controls">
                    <span class="question-counter">問題: <span id="currentQuestion">1</span> / 10</span>
                    <span class="sushi-counter">スコア: <span id="sushiCount">0</span>問</span>
                    <div class="game-controls">
                        <button id="retireBtn" class="retire-btn">リタイア</button>
                        <button id="resetBtn" class="reset-btn">リセット</button>
                    </div>
                </div>
            </div>

            <div class="game-layout">
                <!-- 寿司レーン -->
                <div class="sushi-belt-container">
                    <div class="sushi-belt">
                        <div class="belt-track">
                            <div class="sushi-item" id="sushiItem">
                            </div>
                        </div>
                    </div>
                    
                    <!-- 問題文（レーンの手前に半透明で表示） -->
                    <div class="question-display">
                        <ruby class="target-ruby">
                            <span id="expectedAnswer">雑誌に載ります</span>
                            <rt id="targetReading">ざっしにのります</rt>
                        </ruby>
                        
                        <!-- 入力結果を問題文の下に表示（一旦非表示） -->
                        <div class="input-result" style="display: none;">
                            <span id="userConverted">-</span>
                        </div>
                        
                        <!-- 入力フィールド -->
                        <div class="input-field">
                            <textarea id="userInput" rows="2" placeholder="ここに入力してEnterで確定" autocomplete="off" spellcheck="false"></textarea>
                        </div>
                    </div>
                </div>
                
                <!-- 茶・箸・取った寿司 -->
                <div class="items-row">
                    <div class="tea-cup">🍵</div>
                    <div class="chopsticks">🥢</div>
                    <div class="collected-sushi">
                        <div class="sushi-collection" id="sushiCollection"></div>
                    </div>
                </div>
                
            </div>

            <div class="feedback" id="feedback"></div>
        </div>

        <div class="game-over" id="gameOver">
            <!-- 結果はJavaScriptで動的に生成 -->
        </div>

        <!-- いい感じ変換デモ画面 -->
        <div class="conversion-demo" id="conversionDemo" style="display: none;">
            <div class="demo-container">
                <div class="demo-header">
                    <h2>🤖 いい感じ変換デモ</h2>
                    <p class="demo-subtitle">テキスト選択 + Ctrl+S でAI変換・補完・翻訳</p>
                    <button id="closeDemoBtn" class="close-demo-btn">×</button>
                </div>
                
                <div class="demo-content">
                    <div class="demo-examples">
                        <div class="demo-card">
                            <h4>🌍 翻訳</h4>
                            <div class="example">「私は直希です」→ Ctrl+S → 「English」<br><strong>→ I am Naoki.</strong></div>
                        </div>
                        <div class="demo-card">
                            <h4>😄 絵文字変換</h4>
                            <div class="example">「今日は楽しい」→ Ctrl+S → 「絵文字でデコって」<br><strong>→ 🎉今日は✨楽しい😄</strong></div>
                        </div>
                        <div class="demo-card">
                            <h4>💼 文体変換</h4>
                            <div class="example">「資料できた」→ Ctrl+S → 「ビジネス」<br><strong>→ 資料が完成いたしました</strong></div>
                        </div>
                        <div class="demo-card">
                            <h4>✨ 文章補完</h4>
                            <div class="example">「母の日の花といえば」→ Ctrl+S（選択不要）<br><strong>→ カーネーションが定番ですね</strong></div>
                        </div>
                    </div>
                    
                    <div class="demo-actions">
                        <button id="backToGameBtn" class="action-btn secondary">ゲームに戻る</button>
                        <a href="https://zenn.dev/azookey/articles/ea15bacf81521e" target="_blank" class="action-btn primary">
                            azooKeyをダウンロード
                        </a>
                    </div>
                </div>
            </div>
        </div>

        <!-- いい感じ変換プロンプトウィンドウ -->
        <div class="conversion-prompt-window" id="conversionPromptWindow" style="display: none;">
            <div class="prompt-container">
                <div class="prompt-header">
                    <h3>🤖 いい感じ変換</h3>
                    <button id="closePromptBtn" class="close-prompt-btn">×</button>
                </div>
                
                <div class="prompt-content">
                    <div class="selected-text-display">
                        <label>選択されたテキスト:</label>
                        <div id="selectedTextDisplay" class="selected-text"></div>
                    </div>
                    
                    <div class="prompt-input-section">
                        <label for="conversionPrompt">変換プロンプト:</label>
                        <input type="text" id="conversionPrompt" placeholder="例: English, 絵文字でデコって, 敬語" autocomplete="off">
                        
                        <div class="prompt-examples">
                            <button class="prompt-example-btn" data-prompt="English">English</button>
                            <button class="prompt-example-btn" data-prompt="絵文字でデコって">絵文字</button>
                            <button class="prompt-example-btn" data-prompt="ビジネスメール">ビジネス</button>
                            <button class="prompt-example-btn" data-prompt="敬語">敬語</button>
                        </div>
                    </div>
                    
                    <div class="prompt-actions">
                        <button id="cancelConversionBtn" class="cancel-btn">閉じる</button>
                        <a href="https://zenn.dev/azookey/articles/ea15bacf81521e" target="_blank" class="action-btn primary">ダウンロード</a>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="script.js"></script>
</body>
</html>