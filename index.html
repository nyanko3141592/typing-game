<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Context-Conditioned Composing Contest</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="container">
        <header>
            <h1>🍣 Context Conversion Challenge 🍣</h1>
            <p class="subtitle">文脈を読んで変換する日本語IME向けタイピングゲーム</p>
        </header>

        <div class="start-screen" id="startScreen">
            <div class="start-content">
                <h2>🎮 azooKey on macOS 体験ゲーム</h2>
                <div class="ime-features">
                    <h3>✨ azooKey on macOSの特徴</h3>
                    <p class="feature-description">
                        azooKey on macOSは<strong>文脈を理解する賢いIME</strong>です！
                    </p>
                    <ul class="feature-list">
                        <li>📖 前後の文脈を読んで適切な漢字に変換</li>
                        <li>⚡ ライブ変換で確定せずに一気に入力可能</li>
                        <li>🧠 文章全体を理解して正確な変換を実現</li>
                    </ul>
                </div>
                <div class="game-instructions">
                    <h3>🍣 ゲームの遊び方</h3>
                    <p class="game-description">
                        <strong>文章を一気に最後まで入力してください！</strong><br>
                        途中で確定せず、最後にEnterキーを押すだけでOK
                    </p>
                    <div class="example-box">
                        <p class="example-title">例：同じ音でも前の文脈で変換が変わる！</p>
                        <div class="example-grid">
                            <div class="example-category">
                                <p class="category-title">「かう」の変換</p>
                                <div class="example-item">
                                    <span class="example-input">ねこをかう</span>
                                    <span class="example-arrow">→</span>
                                    <span class="example-output">猫を飼う</span>
                                </div>
                                <div class="example-item">
                                    <span class="example-input">りんごをかう</span>
                                    <span class="example-arrow">→</span>
                                    <span class="example-output">リンゴを買う</span>
                                </div>
                            </div>
                            <div class="example-category">
                                <p class="category-title">「のります」の変換</p>
                                <div class="example-item">
                                    <span class="example-input">雑誌に→のります</span>
                                    <span class="example-arrow">→</span>
                                    <span class="example-output">載ります</span>
                                </div>
                                <div class="example-item">
                                    <span class="example-input">車に→のります</span>
                                    <span class="example-arrow">→</span>
                                    <span class="example-output">乗ります</span>
                                </div>
                            </div>
                            <div class="example-category">
                                <p class="category-title">「かみとかしてます」の変換</p>
                                <div class="example-item">
                                    <span class="example-input">悟りを開きました→かみとかしてます</span>
                                    <span class="example-arrow">→</span>
                                    <span class="example-output">神と化してます</span>
                                </div>
                                <div class="example-item">
                                    <span class="example-input">風呂上がりです→かみとかしてます</span>
                                    <span class="example-arrow">→</span>
                                    <span class="example-output">髪とかしてます</span>
                                </div>
                            </div>
                        </div>
                    </div>
                    <ul class="instructions-list">
                        <li>ひらがなで表示される文章を入力</li>
                        <li>一気に最後まで入力（途中確定不要）</li>
                        <li>Enterキーで確定→正解なら次の問題へ</li>
                        <li>全10問の完了時間を競おう！</li>
                    </ul>
                </div>
                <button id="startBtn" class="start-btn">ゲームスタート</button>
                <div class="ime-link">
                    <a href="https://zenn.dev/azookey/articles/ea15bacf81521e" target="_blank" class="ime-article-link">
                        📚 azooKey on macOSについて詳しく見る
                    </a>
                </div>
                
                <!-- いい感じ変換デモセクション -->
                <div class="conversion-demo-section">
                    <h3>🤖 いい感じ変換を体験</h3>
                    <p class="demo-description">
                        テキストを選択してCtrl+Sで、プロンプトに応じて文章を変換できます！
                    </p>
                    <div class="conversion-links">
                        <a href="good-feeling-conversion.html" class="conversion-link">🤖 いい感じ変換を体験</a>
                    </div>
                </div>
                
                <div class="ranking-preview" id="rankingPreview"></div>
            </div>
        </div>

        <div class="game-area" style="display: none;">
            <div class="sushi-header">
                <div class="time-counter">
                    <span class="time-label">経過時間</span>
                    <span class="time-value" id="gameTimer">0.0</span>
                    <span class="time-unit">秒</span>
                </div>
                <div class="status-controls">
                    <span class="question-counter">問題: <span id="currentQuestion">1</span> / 10</span>
                    <span class="sushi-counter">スコア: <span id="sushiCount">0</span>問</span>
                    <button id="resetBtn" class="reset-btn">リセット</button>
                </div>
            </div>

            <div class="sushi-restaurant">
                <div class="sushi-counter-top">
                    <div class="sushi-belt">
                        <div class="belt-track">
                            <div class="sushi-item" id="sushiItem"></div>
                        </div>
                    </div>
                </div>
                <div class="counter-surface">
                    <div class="table-items">
                        <div class="left-items">
                            <div class="tea-cup">🍵</div>
                            <div class="chopsticks">🥢</div>
                            <div class="empty-plate"></div>
                        </div>
                        <div class="collected-sushi">
                            <div class="sushi-collection" id="sushiCollection"></div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="question-area">
                <div class="question-card">
                    <div class="target-text">
                        <div class="target-label">🎯 変換チャレンジ 🎯</div>
                        <div class="target-content">
                            <ruby class="target-ruby">
                                <span id="expectedAnswer">雑誌に載ります</span>
                                <rt id="targetReading">ざっしにのります</rt>
                            </ruby>
                        </div>
                    </div>
                    <div class="input-section">
                        <textarea id="userInput" rows="2" placeholder="ここに入力してEnterで確定" autocomplete="off" spellcheck="false"></textarea>
                        <div class="input-result">
                            <span class="result-label">入力結果:</span>
                            <span id="userConverted">-</span>
                        </div>
                    </div>
                </div>
            </div>

            <div class="feedback" id="feedback"></div>
        </div>

        <div class="game-over" id="gameOver">
            <!-- 結果はJavaScriptで動的に生成 -->
        </div>

        <!-- いい感じ変換デモ画面 -->
        <div class="conversion-demo" id="conversionDemo" style="display: none;">
            <div class="demo-container">
                <div class="demo-header">
                    <h2>🤖 いい感じ変換デモ</h2>
                    <p class="demo-subtitle">プロンプトに応じてテキストを変換する機能を体験</p>
                    <button id="closeDemoBtn" class="close-demo-btn">×</button>
                </div>
                
                <div class="demo-content">
                    <div class="demo-instructions">
                        <h3>💡 azooKey on macOSでの使い方</h3>
                        <p>1. テキストエディタで文章を入力<br>
                        2. 変換したい部分をマウスで選択<br>
                        3. <strong>Ctrl+S</strong> を押す<br>
                        4. 表示されるウィンドウでプロンプトを入力<br>
                        5. 選択した文章が指定した形式に変換されます</p>
                    </div>

                    <!-- セクション選択 -->
                    <div class="demo-sections">
                        <h4>📋 変換例を選択してください</h4>
                        <div class="section-buttons">
                            <button class="section-btn active" data-section="english">English変換</button>
                            <button class="section-btn" data-section="emoji">絵文字デコ</button>
                            <button class="section-btn" data-section="business">ビジネスメール</button>
                            <button class="section-btn" data-section="casual">カジュアル変換</button>
                            <button class="section-btn" data-section="formal">敬語変換</button>
                        </div>
                    </div>
                    
                    <!-- English変換セクション -->
                    <div class="demo-section" id="englishSection">
                        <div class="section-header">
                            <h5>🌍 English変換</h5>
                            <p>日本語の文章を英語に変換します</p>
                        </div>
                        <div class="conversion-playground">
                            <div class="input-section">
                                <label for="englishTextarea">テキストエリア:</label>
                                <textarea id="englishTextarea" rows="3">私は直希です。よろしくお願いします。</textarea>
                                <div class="selection-info">
                                    <span class="selection-display">選択されたテキスト: なし</span>
                                    <button class="convert-btn" disabled>変換 (Ctrl+S)</button>
                                </div>
                            </div>
                            <div class="expected-result">
                                <strong>期待される変換結果:</strong> I am Naoki. Nice to meet you.
                            </div>
                        </div>
                    </div>

                    <!-- 絵文字デコセクション -->
                    <div class="demo-section" id="emojiSection" style="display: none;">
                        <div class="section-header">
                            <h5>😄 絵文字デコ</h5>
                            <p>文章を絵文字でデコレーションします</p>
                        </div>
                        <div class="conversion-playground">
                            <div class="input-section">
                                <label for="emojiTextarea">テキストエリア:</label>
                                <textarea id="emojiTextarea" rows="3">今日はテンション上がるね。頑張ろう！</textarea>
                                <div class="selection-info">
                                    <span class="selection-display">選択されたテキスト: なし</span>
                                    <button class="convert-btn" disabled>変換 (Ctrl+S)</button>
                                </div>
                            </div>
                            <div class="expected-result">
                                <strong>期待される変換結果:</strong> 🎉 今日は ✨ テンション 📈 上がるね 😄！💪 頑張ろう 🔥！
                            </div>
                        </div>
                    </div>

                    <!-- ビジネスメールセクション -->
                    <div class="demo-section" id="businessSection" style="display: none;">
                        <div class="section-header">
                            <h5>💼 ビジネスメール</h5>
                            <p>カジュアルな文章をビジネス向けに修正します</p>
                        </div>
                        <div class="conversion-playground">
                            <div class="input-section">
                                <label for="businessTextarea">テキストエリア:</label>
                                <textarea id="businessTextarea" rows="3">お世話に〜。直希です。資料できたから送るね。</textarea>
                                <div class="selection-info">
                                    <span class="selection-display">選択されたテキスト: なし</span>
                                    <button class="convert-btn" disabled>変換 (Ctrl+S)</button>
                                </div>
                            </div>
                            <div class="expected-result">
                                <strong>期待される変換結果:</strong> お世話になっております。直希でございます。資料が完成いたしましたので、送付させていただきます。
                            </div>
                        </div>
                    </div>

                    <!-- カジュアル変換セクション -->
                    <div class="demo-section" id="casualSection" style="display: none;">
                        <div class="section-header">
                            <h5>😊 カジュアル変換</h5>
                            <p>堅い文章をカジュアルにします</p>
                        </div>
                        <div class="conversion-playground">
                            <div class="input-section">
                                <label for="casualTextarea">テキストエリア:</label>
                                <textarea id="casualTextarea" rows="3">本日はお忙しい中、貴重なお時間をいただき、誠にありがとうございました。</textarea>
                                <div class="selection-info">
                                    <span class="selection-display">選択されたテキスト: なし</span>
                                    <button class="convert-btn" disabled>変換 (Ctrl+S)</button>
                                </div>
                            </div>
                            <div class="expected-result">
                                <strong>期待される変換結果:</strong> 今日は忙しい中、時間作ってくれてありがとう！
                            </div>
                        </div>
                    </div>

                    <!-- 敬語変換セクション -->
                    <div class="demo-section" id="formalSection" style="display: none;">
                        <div class="section-header">
                            <h5>🙏 敬語変換</h5>
                            <p>普通の文章を敬語にします</p>
                        </div>
                        <div class="conversion-playground">
                            <div class="input-section">
                                <label for="formalTextarea">テキストエリア:</label>
                                <textarea id="formalTextarea" rows="3">会議は明日の10時からです。資料を用意してください。</textarea>
                                <div class="selection-info">
                                    <span class="selection-display">選択されたテキスト: なし</span>
                                    <button class="convert-btn" disabled>変換 (Ctrl+S)</button>
                                </div>
                            </div>
                            <div class="expected-result">
                                <strong>期待される変換結果:</strong> 会議は明日の10時からでございます。資料をご用意いただけますでしょうか。
                            </div>
                        </div>
                    </div>
                    
                    <div class="demo-actions">
                        <button id="backToGameBtn" class="action-btn secondary">ゲームに戻る</button>
                        <a href="https://zenn.dev/azookey/articles/ea15bacf81521e" target="_blank" class="action-btn primary">
                            azooKeyをダウンロード
                        </a>
                    </div>
                </div>
            </div>
        </div>

        <!-- いい感じ変換プロンプトウィンドウ -->
        <div class="conversion-prompt-window" id="conversionPromptWindow" style="display: none;">
            <div class="prompt-container">
                <div class="prompt-header">
                    <h3>🤖 いい感じ変換</h3>
                    <button id="closePromptBtn" class="close-prompt-btn">×</button>
                </div>
                
                <div class="prompt-content">
                    <div class="selected-text-display">
                        <label>選択されたテキスト:</label>
                        <div id="selectedTextDisplay" class="selected-text"></div>
                    </div>
                    
                    <div class="prompt-input-section">
                        <label for="conversionPrompt">変換プロンプト:</label>
                        <input type="text" id="conversionPrompt" placeholder="例: English, 絵文字でデコって, ビジネスメールとして修正" autocomplete="off">
                        
                        <div class="prompt-examples">
                            <span class="prompt-label">よく使われる例:</span>
                            <button class="prompt-example-btn" data-prompt="English">English</button>
                            <button class="prompt-example-btn" data-prompt="絵文字でデコって">絵文字でデコって</button>
                            <button class="prompt-example-btn" data-prompt="ビジネスメールとして修正">ビジネスメールとして修正</button>
                            <button class="prompt-example-btn" data-prompt="敬語に変換">敬語に変換</button>
                            <button class="prompt-example-btn" data-prompt="カジュアルに変換">カジュアルに変換</button>
                        </div>
                    </div>
                    
                    <div class="conversion-examples-section">
                        <label>変換例:</label>
                        <div class="conversion-examples">
                            <div class="conversion-example">
                                <div class="example-prompt">English</div>
                                <div class="example-arrow">→</div>
                                <div class="example-result">I am Naoki.</div>
                            </div>
                            <div class="conversion-example">
                                <div class="example-prompt">絵文字でデコって</div>
                                <div class="example-arrow">→</div>
                                <div class="example-result">🎉 今日は ✨ テンション 📈 上がるね 😄！</div>
                            </div>
                            <div class="conversion-example">
                                <div class="example-prompt">ビジネスメールとして修正</div>
                                <div class="example-arrow">→</div>
                                <div class="example-result">お世話になっております。直希でございます。</div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="ime-instruction">
                        <p><strong>💡 実際に試すには：</strong><br>
                        azooKey on macOSをインストールして、任意のテキストエディタで同じ操作を行ってください。</p>
                    </div>
                    
                    <div class="prompt-actions">
                        <button id="cancelConversionBtn" class="cancel-btn">閉じる</button>
                        <a href="https://zenn.dev/azookey/articles/ea15bacf81521e" target="_blank" class="action-btn primary">azooKeyをダウンロード</a>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="script.js"></script>
</body>
</html>