# Context-Conditioned Composing Contest

文脈を読んで変換する日本語 IME 向けのタイピングゲーム

## ゲーム概要

- 10 問をランダムに出題
- IME の文脈変換性能をテスト：同じ読みでも文脈に応じて適切な漢字に変換されるか
- テキストフィールドに文脈が最初から入力されており、その続きを入力
- 最終的に正しい漢字になっていれば入力方法は問わない（IME 性能テストのため）

## 操作方法

- テキストフィールドに表示される文脈の続きを入力
- Enter キーで回答を確定
- 正解したら自動的に次の問題へ進む
- 不正解の場合は入力内容を保持して再入力可能
- リアルタイムで期待結果との比較表示（正解部分は緑、不正解部分は赤でハイライト）

## 問題例

| 文脈                   | 正解               |
| ---------------------- | ------------------ |
| 雑誌に                 | 載ります           |
| 車に                   | 乗ります           |
| 私は美輪です。         | 父の名前も美輪です |
| 私は三輪です。         | 父の名前も三輪です |
| 悟りを開きました。     | 神と化してます     |
| 風呂上がりです。       | 髪とかしてます     |
| 私はアナウンサーです。 | 司会を務めます     |
| 私は歯医者です。       | 歯科医を務めます   |
| 地中                   | 海                 |
| 世                     | 界                 |
| 方程式の               | 解                 |
| ちいかわの神           | 回                 |

## ゲームフロー

1. スタート画面でゲーム説明と TOP10 ランキングを表示
2. 「ゲームスタート」ボタンで UI 説明画面を表示
3. UI 説明画面で操作方法を簡潔に説明（寿司が流れきる前に入力、画面中央の文章を入力）
4. 「理解しました！ゲーム開始」ボタンで 3 秒カウントダウン開始
5. カウントダウン完了後、タイマー開始
6. 10 問を順番に解く（リアルタイムタイマーとプログレスバーで進捗表示）
7. 各問題で文脈に応じた適切な漢字変換をテスト
8. 全問完了後、自動でランキングに登録（仮名で）
9. 名前を後から変更可能

## IME 最適化機能

- **文脈読み直し**: 問題変更時にフォーカスを一度外してからフォーカスし直すことで、IME に新しい文脈を認識させる
- **入力方法フリー**: ひらがな変換でも直接漢字入力でも、最終結果が正しければ正解
- **リアルタイム比較**: 入力中に期待結果と比較して、正解部分を緑、不正解部分を赤でハイライト表示

## ランキング機能

- **自動登録**: ゲーム完了時に自動でランキングに登録
- **名前変更**: 登録後に名前を変更可能
- **日次リセット**: 毎日 0 時にランキングがリセットされて新しい日のランキングが開始
- **LocalStorage 保存**: 最大 10 件をタイム順で保存
- **詳細表示**: 名前・タイム・日時（年/月/日 時:分:秒）を表示
- **金銀銅表示**: 1 位〜3 位は特別なグラデーション表示

## 技術仕様

- **問題データ管理**: questions.json で問題と変換ルールを管理
- **重複回答防止**: Enter キー連打による誤判定を防ぐ処理フラグ
- **レスポンシブ対応**: モバイルデバイスでも利用可能
- **モダン UI**: グラデーション・アニメーション・ホバー効果

## ファイル構成

### メインゲーム

- `index.html`: タイピングゲームのメインページ
- `script.js`: ゲームロジック、ランキング機能、UI 制御
- `styles.css`: 全体のスタイルシート
- `questions.json`: 問題データと変換ルール

### いい感じ変換デモ

- `good-feeling-conversion.html`: いい感じ変換の体験デモページ
- `good-feeling-conversion.js`: デモ専用の JavaScript（シンプルな Ctrl+S 体験）

## その他の機能

- **UI 説明画面**: ゲーム開始前に簡潔な操作説明を表示
- **3 秒カウントダウン**: ゲーム開始前の準備時間を提供
- **スクリーンショット表示**: screenshot.png でゲーム画面の例を表示
- **リセットボタン**: ゲーム中でも最初からやり直し可能
- **プログレスバー**: 現在の進捗を視覚的に表示
- **リアルタイムタイマー**: ゲーム中に 0.1 秒単位でタイム表示
- **エラーハンドリング**: LocalStorage 保存失敗時の適切な処理

## いい感じ変換デモ機能

azooKey on macOS の「いい感じ変換」機能を体験できる専用ページを実装

### 機能概要

- **ページ構成**: `good-feeling-conversion.html` として独立したページ
- **セクション分け**: 3 つの機能別セクションに整理
- **カード形式レイアウト**: 各セクション内でカード形式のデモを提供
- **シンプルな体験**: ポップアップや複雑な UI を排除したミニマルなデザイン

### セクション構成

#### 1. 🎭 変換：文脈を理解した絵文字

- **🍜 中華料理の文脈**

  - 例文: 中華料理はおいしい
  - プロンプト: えもじ
  - 期待結果: 中華料理はおいしい 🥡🥟🍜

- **😢 感情の文脈**
  - 例文: 猫がいなくなっちゃった
  - プロンプト: えもじ
  - 期待結果: 猫がいなくなっちゃった 😢😭🐈

#### 2. ✨ 補完：AI 文章補完

- **🌺 知識の補完**

  - 例文: 母の日の花といえば
  - 操作: カーソル位置で Ctrl+S（選択不要）
  - 期待結果: 母の日の花といえばカーネーションが定番ですね。

- **🧮 計算の補完**
  - 例文: 12 \* 13 =
  - 操作: カーソル位置で Ctrl+S（選択不要）
  - 期待結果: 12 \* 13 = 156

#### 3. 🔄 選択範囲変換：プロンプトで自在に変換

- **🌍 翻訳変換**

  - 例文: 私は直希です。よろしくお願いします。
  - プロンプト: English
  - 期待結果: I am Naoki. Nice to meet you.

- **😄 絵文字デコレーション**

  - 例文: 今日はテンション上がるね。頑張ろう！
  - プロンプト: 絵文字でデコって
  - 期待結果: 🎉 今日は ✨ テンション 📈 上がるね 😄！💪 頑張ろう 🔥！

- **💼 文体変換（ビジネス）**

  - 例文: お世話に〜。直希です。資料できたから送るね。
  - プロンプト: ビジネスメールとして修正
  - 期待結果: お世話になっております。直希でございます。資料が完成いたしましたので、送付させていただきます。

- **🙏 文体変換（敬語）**
  - 例文: 明日 10 時から会議だから資料よろしく
  - プロンプト: 敬語に変換
  - 期待結果: 明日の 10 時より会議を開催いたします。資料のご準備をお願いいたします。

### 操作方法

1. **テキスト選択**: 各カードのテキストエリアで文章の一部を選択
2. **Ctrl+S 実行**: テキスト選択後に Ctrl+S を押す
3. **視覚フィードバック**: テキストエリアの境界線が緑色に光って操作を確認
4. **期待結果確認**: 各カードの下部に期待される変換結果を静的表示

### 技術実装

- **ブラウザ保存防止**: `e.preventDefault()` で Ctrl+S のデフォルト動作を無効化
- **視覚フィードバック**: 選択テキストがある状態で Ctrl+S を押すとテキストエリアがハイライト
- **補完機能対応**: 文章補完用テキストエリアでは選択なしでも Ctrl+S が反応
- **シンプル設計**: ポップアップウィンドウや複雑な状態管理を排除
- **レスポンシブ対応**: モバイルデバイスでも利用可能
- **セクションヘッダー**: 機能別に明確に区分けされたセクション構成

### アクセス方法

- **メインページから**: 「🤖 いい感じ変換を体験」ボタンでアクセス
- **ゲーム終了後**: 結果画面の「🤖 いい感じ変換デモ」リンクからアクセス
- **直接アクセス**: `good-feeling-conversion.html` への直接リンク

### 実際の IME 機能との違い

この体験デモは操作感のみを再現しており、実際の変換は行いません。
実際の「いい感じ変換」機能を使用するには azooKey on macOS をインストールして、
任意のテキストエディタで同じ操作（テキスト選択 + Ctrl+S）を行う必要があります。

# Web

Download
https://github.com/azooKey/azooKey-Desktop/releases

Repository
https://github.com/azooKey/azooKey-Desktop

---

# いい感じ変換

LLM と接続した賢い変換

## 変換

一番標準的な使い方

今までの変換のスペースの代わりに CTRL + S で発動
本質的には今までのスペースによる変換を AI による賢い変換をすること。
特定キーワードである必要はない。

えもじ [Space] → 前の文脈を読まない絵文字が出てくる

えもじ [Ctrl + s] → 目の文脈を読んだ絵文字が複数候補出てくる

きごう [Ctrl + s] → 目の文脈を読んだ記号が複数候補出てくる

例
中華料理という要件のもと適切なものを選ぶ
中華料理はおいしい[えもじ]→ [🥡/🥟/🍜]

非自明な感情も予想して絵文字を提案する
猫がいなくなっちゃった[えもじ]→ [😢/😭/😭]

数学的な文脈も把握
積分[きごう]→ [∫/dx/∫dx]

## 補完

文章の最後に何も入力しないで Ctrl + s を押すと続きを補完する

例

- 母の日の花といえば[Ctrl + s] → カーネーションが定番ですね。
- 12 \* 13 = [Ctrl + s] → 156

## 選択範囲の変換

すでにこれは紹介を実装済み
